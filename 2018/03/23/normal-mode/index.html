<!DOCTYPE HTML>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Normal Mode (Huang-Rhys factor) Calculator | Sleeping...</title>

  
  <meta name="author" content="Weitang Li">
  

  
  <meta name="description" content="A serious blog">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="Normal Mode (Huang-Rhys factor) Calculator"/>

  <meta property="og:site_name" content="Sleeping..."/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Sleeping..." type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?bf4c5f63e0485106a91950fc4aa87838";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>


<body>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Sleeping...</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>Normal Mode (Huang-Rhys factor) Calculator</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2018/03/23/normal-mode/" rel="bookmark">
        <time class="entry-date published" datetime="2018-03-23T12:03:37.000Z">
          2018-03-23
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        
<table id="calculator">
    <tr>
        <td>
            Frequency:
        </td>
        <td>
            <input type="text" id="freq" unit="cm-1">
            <select id="freq_unit">
                <option value="au">a.u.</option>
                <option value="ev">eV</option>
                <option value="mev">meV</option>
                <option value="cm-1" selected="selected">cm-1</option>
            </select>
        </td>
    </tr>
    <tr>
        <td>
            Lambda:
        </td>
        <td>
            <input type="text" id="lambda" unit="mev">
            <select id="lambda_unit">
                <option value="au">a.u.</option>
                <option value="ev">eV</option>
                <option value="mev" selected="selected">meV</option>
                <option value="cm-1">cm-1</option>
            </select>
        </td>
    </tr>
    <tr>
        <td>
            Displacement
        </td>
        <td>
            <input type="text" id="displacement" unit="au">
            <select id="displacement_unit">
                <option value="au" selected="selected">a.u.</option>
                <option value="ang">Angstroms</option>
            </select>
        </td>
    </tr>
    <tr>
        <td>
            Huang-Rhys Factor:
        </td>
        <td>
            <input type="text" id="hr" unit="au">
        </td>
    </tr>
</table>
<input type="button" id="clear" value="clear values">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
<script>
    var unit2au = {"au": 1, "a.u.":1, "ev": 3.6749e-2,  "mev": 3.6749e-5, "cm-1": 4.5563e-6, "ang": 1 / 0.529177};
    function unit_conversion(value, old_unit, new_unit){
        var value_in_au = parseFloat(value) * unit2au[old_unit];
        return  value_in_au / unit2au[new_unit];
    }
    function set_input_value(input, au_value){
        input.setAttribute("au_value", au_value);
        input.value = unit_conversion(au_value, "au", input.getAttribute("unit"));
        input.setAttribute("disabled", "disabled");
    }
    function update_dis_from_freq_lam(displacement_input, au_freq, au_lambda){
        var au_displacement = Math.sqrt(2 * au_lambda / Math.pow(au_freq, 2));
        set_input_value(displacement_input, au_displacement);
        return au_displacement;
    }
    function update_hr_from_freq_lam(hr_input, au_freq, au_lambda){
        var hr = au_lambda / au_freq;
        set_input_value(hr_input, hr);
        return hr;
    }
    function update_lam_from_freq_dis(lambda_input, au_freq, au_displacement){
        var au_lambda = 1 / 2 * Math.pow(au_freq, 2) * Math.pow(au_displacement, 2);
        set_input_value(lambda_input, au_lambda);
        return au_lambda;
    }
    function update_lam_from_freq_hr(lambda_input, au_freq, hr){
        var au_lambda = au_freq * hr;
        set_input_value(lambda_input, au_lambda);
        return au_lambda;
    }
    function update_freq_from_lam_dis(freq_input, au_lambda, au_displacement){
        var au_freq = Math.sqrt(2 * au_lambda / Math.pow(au_displacement, 2));
        set_input_value(freq_input, au_freq);
        return au_freq;
    }
    function update_freq_from_lam_hr(freq_input, au_lambda, hr){
        var au_freq = au_lambda / hr;
        set_input_value(freq_input, au_freq);
        return au_freq;
    }
    function update_freq_from_dis_hr(freq_input, au_displacement, hr){
        var au_freq = 2 * hr / Math.pow(au_displacement, 2);
        set_input_value(freq_input, au_freq);
        return au_freq;
    }
    function update_value(){
        var ctx = $("#calculator");
        var freq_input = $("#freq", ctx)[0];
        var lambda_input = $("#lambda", ctx)[0];
        var displacement_input = $("#displacement", ctx)[0];
        var hr_input = $("#hr", ctx)[0];
        var au_freq = freq_input.getAttribute("au_value");
        var au_lambda = lambda_input.getAttribute("au_value");
        var au_displacement = displacement_input.getAttribute("au_value");
        var hr = hr_input.value;
        if (au_freq && !freq_input.disabled && au_lambda && !lambda_input.disabled){
            au_displacement = update_dis_from_freq_lam(displacement_input, au_freq, au_lambda);
            hr = update_hr_from_freq_lam(hr_input, au_freq, au_lambda);
        } else if (au_freq && !freq_input.disabled && au_displacement && !displacement_input.disabled){
            au_lambda = update_lam_from_freq_dis(lambda_input, au_freq, au_displacement);
            hr = update_hr_from_freq_lam(hr_input, au_freq, au_lambda);
        } else if (au_freq && !freq_input.disabled && hr && !hr_input.disabled){
            au_lambda = update_lam_from_freq_hr(lambda_input, au_freq, hr);
            au_displacement = update_dis_from_freq_lam(displacement_input, au_freq, au_lambda);
        } else if (au_lambda && !lambda_input.disabled && au_displacement && !displacement_input.disabled){
            au_freq = update_freq_from_lam_dis(freq_input, au_lambda, au_displacement);
            hr = update_hr_from_freq_lam(hr_input, au_freq, au_lambda);
        } else if (au_lambda && !lambda_input.disabled && hr && !hr_input.disabled){
            au_freq = update_freq_from_lam_hr(freq_input, au_lambda, hr);
            au_displacement = update_dis_from_freq_lam(displacement_input, au_freq, au_lambda);
        } else if (au_displacement && !displacement_input.disabled && hr && !hr_input.disabled) {
            au_freq = update_freq_from_dis_hr(freq_input, au_displacement, hr);
            au_lambda = update_lam_from_freq_hr(lambda_input, au_freq, hr);
        }
    }
    $("#clear").click(function(){
       $(":text").each(function(){
           this.removeAttribute("disabled");
           this.value = "";
           this.removeAttribute("au_value")
       })
    });
    $("input").on("input", function(){
        if (this.value){
            var unit = this.getAttribute("unit");
            this.setAttribute("au_value", unit_conversion(this.value, unit, "au"));
            update_value()
        }
    });
    $("select").change(function(){
        var input = this.previousElementSibling;
        var new_unit = this.value;
        if (input.value) {
            var old_unit = input.getAttribute("unit");
            input.value = unit_conversion(input.value, old_unit, new_unit);
        }
        input.setAttribute("unit", new_unit);
    })
</script>

<p>Type in any of 2 variables in frequency, lambda, displacement or HR-factor, and the remaining 2 variables will be calculated automatically.<br>Click “clear values” to modify auto-locked variables.</p>
<a id="more"></a> 
<hr>
<p>输入任意两个变量，另外两个变量会自动计算。<br>为了防止用户更改自动计算的变量，带来语义不确定性，自动计算的变量会被设置为只读。如果需要修改，需要点击清除。<br>平日苦于计算正则模式时的单位换算和相互计算的繁琐，索性自己写一个小计算器挂在网上。<br>自己比较得意的是这个计算器的便利性和简洁性（Everything Should Be Made as Simple as Possible, But Not Simpler）。</p>
<p>欢迎转载，注明出处即可。</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    

    </div>

    
  </div>
</article>


    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2018 Weitang Li
    
  </p>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-112074287-1', 'auto');
    ga('send', 'pageview');

</script>

  </div>
</div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>